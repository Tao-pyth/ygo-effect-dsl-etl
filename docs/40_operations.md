# 40_operations — 運用とトラブルシュート

## 実行コマンド
- `sync`：API→SQLite
- `export`：SQLite→JSONL+manifest（全件）

## ログ
- 推奨：`data/logs/` に日付付きで出力
- 失敗時に「どこまで処理が進んだか」が分かるログを残す

## よくある失敗と対処
### APIレート制限（HTTP 429）
- リトライ（指数バックオフ）
- リクエスト間隔の調整

### タイムアウト
- タイムアウト値を設定
- ページング単位（num/offset）を調整（必要なら）

### 画像取得失敗（404/一時障害）
- image_relpath は空文字で許容
- リトライしても駄目ならスキップ（後日再取得可能に）

### SQLite ロック
- 同時実行禁止（単一プロセス）
- WALモード検討（必要なら）

## 安全運用ルール
- **同時起動しない**（二重起動防止）
- 途中で落ちても再実行で復旧できる（冪等性）
